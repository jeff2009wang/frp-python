# FRP-Python 快速使用指南

## Windows 可执行文件

已编译好的可执行文件位于 `dist/` 目录：
- `frps.exe` - 服务端（约 9MB）
- `frpc.exe` - 客户端（约 9MB）

---

## 快速开始

### 1. 服务端（在有公网IP的服务器上）

```bash
frps.exe 7000 8001
```

这会启动服务端：
- 监听端口 8001 接收外部用户连接
- 监听端口 7000 接收客户端连接

---

### 2. 客户端（在内网机器上）

**方式一：监控指定端口**
```bash
frpc.exe 123.45.67.89 7000 --ports 22,80,3389
```

**方式二：监控所有端口**
```bash
frpc.exe 123.45.67.89 7000
```

**方式三：自定义参数**
```bash
frpc.exe 123.45.67.89 7000 --target localhost --interval 30 --pool-size 10
```

---

## 工作原理

1. **服务端启动**：监听两个端口（7000 和 8001）
2. **客户端启动**：连接到服务端的 7000 端口
3. **端口扫描**：客户端定期扫描本地端口
4. **自动穿透**：发现服务后自动创建 FRP 连接
5. **用户访问**：外部用户通过服务端 8001 端口访问内网服务

---

## 示例场景

### 场景：穿透远程桌面

**服务端**：
```bash
frps.exe 7000 8001
```

**客户端**：
```bash
frpc.exe 123.45.67.89 7000 --ports 3389
```

**使用**：
启动 Windows 远程桌面后，外部用户可以通过 `123.45.67.89:3389` 连接。

---

### 场景：穿透多个服务

**服务端**：
```bash
frps.exe 7000 8001
```

**客户端**：
```bash
frpc.exe 123.45.67.89 7000 --ports 22,80,443,8080,3389
```

**效果**：
- SSH (22) → `123.45.67.89:22`
- HTTP (80) → `123.45.67.89:80`
- HTTPS (443) → `123.45.67.89:443`
- Web (8080) → `123.45.67.89:8080`
- RDP (3389) → `123.45.67.89:3389`

---

## 客户端参数说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `--target HOST` | 要扫描的目标主机 | localhost |
| `--interval SECONDS` | 扫描间隔（秒） | 30 |
| `--pool-size NUM` | 连接池大小 | 5 |
| `--ports PORTS` | 要监控的端口列表（逗号分隔） | 所有端口 |
| `--stable-time SECONDS` | 端口稳定时间（秒） | 10 |
| `--status` | 显示当前状态并退出 | - |

---

## 重新编译

如果需要重新编译：

```bash
python build.py
```

或分别编译：

```bash
pyinstaller --onefile --name frps --console --clean frps_standalone.py
pyinstaller --onefile --name frpc --console --clean frpc_standalone.py
```

---

## Linux 版本

在 Linux 上编译：

```bash
python3 -m pip install pyinstaller
python3 build.py
```

生成的可执行文件在 `dist/` 目录，文件名为 `frps` 和 `frpc`（无 .exe 后缀）

---

## 特性

- ✅ **单文件运行**：无需 Python 环境
- ✅ **自动端口扫描**：自动发现运行中的服务
- ✅ **智能 FRP 管理**：自动创建/关闭连接
- ✅ **低延迟传输**：TCP_NODELAY + 64KB 缓冲区
- ✅ **自动重连**：连接断开自动恢复
- ✅ **连接池**：预建立连接，减少延迟
